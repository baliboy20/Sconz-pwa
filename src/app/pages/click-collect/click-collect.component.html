
<div style="height: 150px; width: 100%"></div>
<div class="cc-container">

    <mat-progress-spinner
      *ngIf="isLoading"
      mode="indeterminate"
      color="primary">
    </mat-progress-spinner>
  <!-- Categories ribbon. -->
  <ng-container *ngTemplateOutlet="CategoriesRibbonTmpl; context:{prods: prods$| async}"></ng-container>
    <div class="cc-list-wrapper" id="ccListWrapper">




      <ng-container *ngFor="let prod of prods$| async">
        <div class="category-header"

             style="text-transform: capitalize">
          <div [id]="prod[0]"
               style="position: relative;
                      transform: translateY(-128px);
                      display: block;
                      "></div>
          {{prod[0]}}
        </div>
        <ng-container *ngTemplateOutlet="cardTmpl; context:{prods: prod[1]}"></ng-container>

      </ng-container>
      <div class="spacer">
      </div>

    </div>

</div>

<!--
===============================================================================================

                          TEMPLATES
===============================================================================================
-->


<!--
~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_
                         Horizontal Slider bar.
-->
<ng-template #CategoriesRibbonTmpl let-prods=prods>
  <div class="horizontal-slidebar">
    <a
      (click)="scrollToId(prod[0])"
      class="span-item"
      *ngFor="let prod of prods">{{prod[0] }}</a>
  </div>
</ng-template>


<!--
~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_ ~~_
                         Product Item Card.
-->
<ng-template #cardTmpl let-prods=prods let-idx=idx>
  <ng-template> <div class="mat-elevation-z13">jlljj</div></ng-template>

  <div class="card-layout mat-elevation-z3"

       (click)="onChooseProduct(prod)"
       *ngFor="let prod of prods">

    <p class="product-name">{{prod.name}}</p>


    <div class="product-description">
      {{prod.description}} </div>

    <div class="product-price">
      <span>{{prod.lowestPrice() | currency: "GBP"}}</span>
    </div>
    <!--     [appCustomImg]-->
    <div class="product-image" id="product-image">
      <img [src]="prod?.thumbImg?.url" width="100%">
    </div>

  </div>
</ng-template>
